【ルール】
・クラスはアッパーキャメル、それ以外は一般的にロウワーキャメル(変数、関数名)
・関数名は、基本的に　動詞＋目的語　。ファイル名では、わかりやすい命名が基本
・ちょびっとハンガリアン記法（メンバ変数のみで、m\_　の接頭辞）

インラインは基本使わない。（テンプレートももし必要なら分けるがケースバイケース）
friend も基本使わない。
グローバル変数もシグナルのみ。g\_の接頭辞をつける。
define は、使わない。const int hoge = 10;みたいにする。

【やることメモ】
・解析ミスがニューメリックに該当していないか。
・MODE #gen b 　バンリストを考える。
・プレフィックスロジック変更したが、機能するか客員

・（基本コマンドの実装系）
・セーフ send を実装して、一つの関数で扱うことで、デバッグ（送信メッセージの解析）をしやすくする。
→ 特に、MSG＿NOSIGNAL の対策が必要と思う。戻り値のあとに errno をチェックして、リソースの問題を検討したい。OS に落とされる危険性あり。
・エラーの順番、解析に順番はあるか？
・USER コマンドからホスト名取得？
・サーバー名とホスト名混同した処理がないか？
・重要度の高いメッセージにログで色をつける（PASS も考え）

・RFC 的な観点から、構造のミスがないかが、重要（修正可能か、もしくはディフェンスが可能かという観点から）

【操作方法メモ】
・nc -6 240b:c010:422:b881:18d8:9612:c7c3:c736 6667
・nc ::1 4444
・irssi -n naga -c localhost -p 4444
・irssi -n neko -c localhost -p 4444
・

【プロトコル】

・非ニューメリックメッセージ（コマンド）
→ サーバーとクライアント両方で発信する。
→ サーバーだとプレフィックス（サーバー識別子）が必要で、クライアントだとコマンドから直接始まる（:から始まらない）

[:prefix] command [params] :[trailing]
送信元（サーバーのみ、クライアントはサーバーで把握するので不要）　コマンド　引数（チャンネル名やユーザー）　メッセージ本文
送信の場合は、
:neko!user@host PRIVMSG #general :こんにちは、みんな！

・プレフィックスの構成
サーバーから、送る際につける。
サーバー名は、ネットワーク内で一意なら OK なはず。ft_irc で十分。
サーバークライアントで、ユーザーの行動にはプレフィックスが必要。
prefix = nickname [ "!" user ] [ "@" host ]
で構成されて、
ニックネーム、！ユーザー名＠ホスト名

プレフィックスがサーバー名の場合と、クライアント名の違い
・サーバー名
リプライ、サーバー通知、PONG、NOTICE 的なやつ。
・クライアント名（クライアント駆動的なやつ）
PRIVMSG、NOTICE、JOIN、PART、QUIT、NICK、MODE

受信の場合は
PRIVMSG #general :こんにちは、みんな！

・ニューメリックメッセージ（リプライ）
→ サーバーからクライアントに送る、結果通知や、エラー報告の形式。

[:prefix] [numeric reply] [target] [:message]
サーバー名、数値リプライ、対象ユーザー、メッセージ本文の形式になる。

コマンドは大文字として処理する。
CRLF で終わる。
スペースとコロンで区切る。

・エラーのときは。

```
:<server_name> <numeric_reply> <target> :<message>
```

サーバーネームは、サーバーを区別必要がないから、固定名で良さそう。

【】
ホストネームは 63 文字
メッセージにヌル文字は含めない
マスクは、ワイルドカードを含むもの → 使い道不明

【irssi の挙動】
サーバーのポートを 6667 で指定で立ち上げたにもかかわらず、
クライアントを 4444 でログインしようとすると、
アプリ側で、デフォルトポートを試すようで、6667 で入ってくれる。

チャンネル参加と、クライアントアプリのチャンネル固有画面の問題になる。アルトと番号、もしくは、/window goto #gen でもいける。JOIN でも画面が切り替わる。
